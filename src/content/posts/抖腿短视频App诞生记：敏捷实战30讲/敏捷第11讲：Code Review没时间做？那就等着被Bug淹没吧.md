---
title: "敏捷第11讲：Code Review没时间做？那就等着被Bug淹没吧"
published: 2025-07-20
description: "如何在不增加项目时长的前提下，将Code Review机制植入到开发流程中，让团队从“事后救火”转变为“事前预防”？"
image: ""
tags: [敏捷]
category: "敏捷实战30讲"
draft: false
---


通过上一环节的调整，我们解决了 **“流速”** 的问题。开发人员被强制提升了自测标准，也开始协助测试清空积压。

然而，新的危机正在悄然形成。

你在周五复盘燃尽图时发现：**每天看板上的卡片都在动，但大量的卡片却在 In Progress 和 Verify 之间，像乒乓球一样来回弹跳。**

卡片从开发（In Progress）移到测试（Verify），被测出Bug后，又退回开发（In Progress）。开发修复后，再次移到测试，又发现新的Bug，再次弹回……

这种现象意味着：我们虽然解决了 **“数量瓶颈”**（代码太多测不过来），但又迎来了 **“质量危机”**。

**研发老张抱怨：** “我们花了 40% 的时间在修 Bug。我的代码没问题，但我得花时间去看小李的代码，他写的代码逻辑太复杂了，全是隐患。我也想做 Code Review，但谁来为那 20% 的 Review 时间买单？”

**核心问题：** 团队陷入了 **“快速交付——快速发现Bug——快速修复Bug”** 的恶性循环。为了追求速度而牺牲了质量，最终反而导致了最慢的速度。

在初创公司，“没时间做 Code Review”是最常见的借口，也是最昂贵的“技术债务”。

如何在不增加项目时长的前提下，将 Code Review 机制植入到开发流程中，让团队从 **“事后救火”** 转变为 **“事前预防”**？

## 一、 诊断：为什么“返工”是项目最昂贵的浪费？

“弹跳卡片”现象表明，你的团队正在经历 **“高返工率”**。

*   **隐性成本：** 修复一个 Bug 的时间（例如 2小时）不是真正的成本。真正的成本是：
    
    1.  **上下文切换成本：** 研发必须放下手头的任务，去回忆几天前写的代码（占用的脑力资源）。
    2.  **环境重建成本：** 重新拉分支、部署测试环境的时间。
    3.  **信任损耗：** 频繁的 Bug 会让测试、产品、老板对研发团队的信任度降低。

**敏捷金律：** 提前投入 1 小时的 Code Review，可以节省 10 小时的 Bug 修复时间。

## 二、 机制设计：将 Code Review 植入 DoD，而非作为额外任务

如果将 Code Review (CR) 设置为一个**独立任务**，它一定会因为“忙”而被推迟。PM的策略必须是：**将 CR 变成任务交付的必经之路，让它成为“不出门的条件”。**

### 1\. 调整 DoD：CR 成为“通行证”

我们将 **Code Review** 环节，写进**Definition of Done (DoD)** 中，且将其置于 **Developer Acceptance Test (DAT)** 之前：

> **增强版 DoD 示例：**
> 
> 1.  代码已编写，并通过所有单元测试。
> 2.  **【新增】代码已通过至少一位同级（Peer）开发人员的 Code Review。**
> 3.  通过开发验收测试（DAT）。
> 4.  任务卡片状态已更新。

**效果：** 开发人员现在需要另一个人“签名”才能提交任务。这强制他们必须在提测前就解决代码规范和逻辑漏洞。

### 2\. 协作模式调整：建立“双人任务”机制

为了确保 CR 不被拖延，必须为它建立**优先级机制**：

*   **优先级：** 在站会上，PM必须明确宣布： **“为队友进行 Code Review 的优先级，高于自己开始下一个新任务。”**
*   **CR 责任人：** 在认领任务时，同时指定一名 **Code Reviewer**（通常是技术负责人老张，或团队中具有空闲资源的成员）。
*   **看板信号：** 在电子看板上，添加一个名为 **“CR”** 的泳道，或者在 **In Progress** 栏中增加一个 **“Pending CR”** 状态。任何进入此状态的任务，必须在 2 小时内被 Reviewer 认领并处理。

## 三、 实战工具：利用自动化完成 CR 的“配平”

在现代职场，CR 已经高度工具化，这消除了“手动检查”的时间浪费：

1.  **利用 Git/GitLab/GitHub 的 MR/PR (Merge Request/Pull Request) 机制：**
    
    *   **强制策略：** 设置主分支保护规则：**未通过 1 位 Reviewer 批准的 Pull Request，无法合并。**
    *   **自动化检查：** 引入 Pre-commit Hooks（预提交钩子）或 CI/CD 工具，强制在 CR 之前检查**代码格式（Lint）**和**代码风格**。把机器能做的工作交给机器，节省人力时间。
2.  **CR 时间成本核算：**
    
    *   让老张将 CR 的时间作为 **“维护”** 或 **“技术债务”** 计入工时，但不计入具体功能任务的工时。这让 CR 的时间消耗可视化，避免其被认为是一项额外的、无价值的工作。

## 四、 总结：质量是速度的前提

通过将 Code Review 机制化、自动化，并植入到 DoD 中，我们做到了：

*   **从“事后救火”到“事前防火”。**
*   **将团队对代码质量的责任，从“个人”提升到“团队”。**
*   **最终：** 降低了卡片在 In Progress 和 Verify 之间的弹跳频率，真正实现了看板的 **“高速流动”**。

**记住：** 敏捷不是“越快越好”，而是“可持续的快”。而持续的快，以质量为前提。

---

## 【第11讲·思考】

**场景回顾：** 你成功引入了 Code Review 机制。老张是技术负责人，他被任命为大部分 CR 的唯一 Reviewer。 结果，新的瓶颈又出现了：**老张被淹没在 CR 中，自己核心的架构任务被耽误了。** 看板上 **“Pending CR”** 泳道开始堆积卡片。

**请思考并回答：**

1.  **诊断题：** 这种现象表明团队在 CR 机制设计上犯了什么错误？（提示：关于单点依赖和知识扩散）。
2.  **执行题：** 如何调整 CR 机制，既能保证代码质量，又能解放老张这个 **“超级英雄”**，让团队整体的技术能力提升？请给出两条具体的、可执行的方案。