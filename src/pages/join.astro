---
import MainGridLayout from "../layouts/MainGridLayout.astro";
import { Icon } from "astro-icon/components";
import qrCodeImg from "../constants/images/card.jpg";

const title = "加入我们 | 建立连接";
const description =
  "一个人可以走得很快，但一群人可以走得很远。期待与你交流学习、资源互通、岗位互推。";
---

<MainGridLayout title={title} description={description}>
  <script
    src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"
    is:inline></script>

  <div
    class="bg-[var(--card-bg)] rounded-[2rem] p-8 md:p-10 border border-[var(--line-divider)] shadow-sm relative overflow-hidden flex flex-col-reverse md:flex-row items-center gap-8 justify-between"
  >
    {/* 背景光晕装饰 */}
    <div
      class="absolute -top-20 -right-20 w-72 h-72 bg-blue-500/10 dark:bg-blue-400/5 rounded-full blur-3xl pointer-events-none"
    >
    </div>

    {/* 左侧文字区 */}
    <div class="flex-1 relative z-10 text-center md:text-left">
      <div
        class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800/50 mb-5 shadow-sm"
      >
        <Icon name="fa6-solid:handshake" class="text-sm animate-pulse" />
        <span class="text-xs font-bold tracking-wider">CONNECT WITH ME</span>
      </div>

      <h1
        class="text-3xl md:text-4xl font-black mb-4 text-transparent bg-clip-text bg-gradient-to-br from-blue-600 to-indigo-500 dark:from-blue-400 dark:to-indigo-300 drop-shadow-sm tracking-tight"
      >
        让链接产生价值
      </h1>

      <p
        class="text-[var(--content)] opacity-85 text-sm md:text-base leading-relaxed text-balance font-medium"
      >
        无论你是前端大佬、后端极客、产品大牛，还是正在迷茫的行业新人。在这里，我们不谈职场
        PUA，只做纯粹的技术交流与搞钱搭子。
      </p>
    </div>

    {/* 右侧动态插画区 (喝咖啡敲代码的极客) */}
    <div
      class="w-48 h-48 md:w-56 md:h-56 shrink-0 relative z-10 drop-shadow-xl hover:scale-105 transition-transform duration-500"
    >
      <lottie-player
        src="https://assets3.lottiefiles.com/packages/lf20_kkflmtur.json"
        background="transparent"
        speed="1"
        style="width: 100%; height: 100%;"
        loop
        autoplay
      >
      </lottie-player>
    </div>
  </div>

  <div
    class="max-w-4xl mx-auto w-full bg-[var(--card-bg)] rounded-[2rem] shadow-xl border border-[var(--line-divider)] overflow-hidden flex flex-col md:flex-row relative z-10 mt-6"
  >
    {/* 左侧：价值主张与愿景 */}
    <div
      class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center relative overflow-hidden bg-gradient-to-br from-blue-50/50 to-transparent dark:from-blue-900/10"
    >
      <Icon
        name="fa6-solid:globe"
        class="absolute -top-10 -left-10 text-9xl text-blue-500/5 dark:text-blue-400/5 rotate-12 pointer-events-none"
      />

      <h2
        class="text-2xl font-bold mb-8 flex items-center gap-3 text-[var(--content)]"
      >
        <Icon name="fa6-solid:users" class="text-blue-500 text-2xl" /> 加入西瓜的私域圈子
      </h2>

      {/* 间距调整为 space-y-6 以完美容纳四个模块 */}
      <div class="space-y-6">
        {/* 特权 1 */}
        <div class="flex gap-4 items-start group">
          <div
            class="shrink-0 w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 group-hover:scale-110 group-hover:rotate-3 transition-transform"
          >
            <Icon name="fa6-solid:lightbulb" class="text-xl" />
          </div>
          <div>
            <h3 class="text-lg font-bold text-[var(--content)] mb-1">
              交流学习
            </h3>
            <p class="text-sm text-[var(--content)] opacity-70 leading-relaxed">
              全栈开发、PMP项目管理、AI应用落地、甚至是如何做好一道红烧肉，随时探讨，拒绝闭门造车。
            </p>
          </div>
        </div>

        {/* 特权 2 */}
        <div class="flex gap-4 items-start group">
          <div
            class="shrink-0 w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 group-hover:scale-110 group-hover:-rotate-3 transition-transform"
          >
            <Icon name="fa6-solid:link" class="text-xl" />
          </div>
          <div>
            <h3 class="text-lg font-bold text-[var(--content)] mb-1">
              资源互通
            </h3>
            <p class="text-sm text-[var(--content)] opacity-70 leading-relaxed">
              工具分享、开源项目共建、副业搞钱思路碰撞。把你闲置的资源变成别人的刚需。
            </p>
          </div>
        </div>

        {/* 特权 3 */}
        <div class="flex gap-4 items-start group">
          <div
            class="shrink-0 w-10 h-10 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 group-hover:scale-110 group-hover:rotate-3 transition-transform"
          >
            <Icon name="fa6-solid:briefcase" class="text-xl" />
          </div>
          <div>
            <h3 class="text-lg font-bold text-[var(--content)] mb-1">
              岗位互推
            </h3>
            <p class="text-sm text-[var(--content)] opacity-70 leading-relaxed">
              打破信息差！优质简历直达内推人，靠谱坑位优先内部分享，一起度过行业寒冬。
            </p>
          </div>
        </div>

        {/* ✨ 新增特权 4：情绪价值与树洞 */}
        <div class="flex gap-4 items-start group">
          <div
            class="shrink-0 w-10 h-10 rounded-xl bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-400 group-hover:scale-110 group-hover:-rotate-3 transition-transform"
          >
            <Icon name="fa6-solid:mug-hot" class="text-xl" />
          </div>
          <div>
            <h3 class="text-lg font-bold text-[var(--content)] mb-1">
              专属树洞
            </h3>
            <p class="text-sm text-[var(--content)] opacity-70 leading-relaxed">
              有些话朋友圈发不了，有些压力无人诉说。无论是职场焦虑还是生活迷茫，这里都是你卸下防备的倾诉角落。
            </p>
          </div>
        </div>
      </div>
    </div>

    {/* 右侧：二维码展示区 */}
    <div
      class="w-full md:w-1/2 p-8 md:p-12 bg-gray-50 dark:bg-zinc-800/50 border-l border-[var(--line-divider)] flex flex-col items-center justify-center relative"
    >
      <div class="text-center mb-8">
        <span
          class="inline-block px-3 py-1 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 text-xs font-bold tracking-widest mb-2 border border-emerald-200 dark:border-emerald-800/50"
        >
          WECHAT
        </span>
        <h3 class="text-xl font-bold text-[var(--content)]">扫码添加好友</h3>
      </div>

      <div class="relative group mb-8">
        <div
          class="absolute -inset-1 bg-gradient-to-r from-emerald-400 to-blue-500 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-500"
        >
        </div>

        <img
          src={qrCodeImg.src}
          alt="西瓜的微信二维码"
          class="relative w-56 h-56 md:w-64 md:h-64 object-contain rounded-2xl shadow-lg border-2 border-white dark:border-zinc-700 bg-white p-2 transition-transform duration-500 group-hover:scale-105"
        />

        <div
          class="absolute -bottom-4 -right-4 bg-white dark:bg-zinc-800 rounded-full p-3 shadow-xl border border-gray-100 dark:border-zinc-700 z-10"
        >
          <Icon name="fa6-solid:qrcode" class="text-2xl text-emerald-500" />
        </div>
      </div>

      <div class="flex flex-col items-center w-full">
        <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">
          或搜索微信号
        </p>

        <button
          id="copy-btn"
          class="group relative flex items-center gap-3 px-5 py-3 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-700 rounded-xl hover:border-emerald-500 dark:hover:border-emerald-500 transition-all shadow-sm w-full max-w-[240px] justify-between overflow-hidden"
          onclick="copyWechatId()"
        >
          <span
            class="font-mono font-bold text-lg text-[var(--content)] group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors"
          >
            shenwan96
          </span>
          <Icon
            name="fa6-solid:copy"
            class="text-gray-400 group-hover:text-emerald-500 transition-colors"
          />

          <div
            id="copy-success"
            class="absolute inset-0 bg-emerald-500 flex items-center justify-center text-white font-bold text-sm translate-y-full transition-transform duration-300"
          >
            复制成功! 🎉
          </div>
        </button>
      </div>

      <div
        class="mt-8 p-4 bg-orange-50 dark:bg-orange-900/10 border border-dashed border-orange-200 dark:border-orange-800/50 rounded-xl w-full text-center relative overflow-hidden"
      >
        <Icon
          name="fa6-solid:bell"
          class="absolute -top-3 -right-2 text-4xl text-orange-500/10 rotate-12"
        />
        <p
          class="text-sm text-orange-600 dark:text-orange-400 font-bold flex items-center justify-center gap-2"
        >
          <Icon name="fa6-solid:pen" class="text-sm" />
          添加好友时，务必备注您的来意哦！
        </p>
        <p class="text-xs text-orange-500/80 dark:text-orange-400/80 mt-1.5">
          例如：“博客粉丝”、“交流技术”、“内推”等
        </p>
      </div>
    </div>
  </div>

  <script is:inline>
    function copyWechatId() {
      const wechatId = "shenwan96";
      navigator.clipboard
        .writeText(wechatId)
        .then(() => {
          const successMsg = document.getElementById("copy-success");
          successMsg.classList.remove("translate-y-full");
          setTimeout(() => {
            successMsg.classList.add("translate-y-full");
          }, 2000);
        })
        .catch((err) => {
          console.error("复制失败:", err);
          alert("复制失败，请手动复制微信号：shenwan96");
        });
    }
  </script>
</MainGridLayout>
