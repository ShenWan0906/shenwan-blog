---
import MainGridLayout from "../layouts/MainGridLayout.astro";
import { Icon } from "astro-icon/components";

const title = "实验室 | 西瓜的数字空间";
const description = "探索西瓜的独立项目、子系统与生活记录。";

// 1. 实验室数据：仅保留三个核心功能，优化色调与图片
const projects = [
  {
    name: "美食日记",
    desc: "记录生活中的每一次美味相遇，用温暖的视角捕捉食物的故事。",
    link: "http://shenwan.life/fooddiary/",
    icon: "material-symbols:local-dining",
    // 琥珀金：适配暖白色调
    iconColor: "text-amber-600 dark:text-amber-500",
    iconBg: "bg-amber-50 dark:bg-amber-950/30",
    image: "/foodimages/food.jpg", 
    gradient: "from-amber-400 to-orange-500",
    delay: "100ms"
  },
  {
    name: "光影浮生",
    desc: "用镜头记录人间烟火，定格那些不经意的瞬间。",
    link: "http://shenwan.life/gallery/",
    icon: "material-symbols:photo-camera",
    // 冰蓝色：适配冷黑色调
    iconColor: "text-blue-600 dark:text-blue-400",
    iconBg: "bg-blue-50 dark:bg-blue-950/30",
    image: "/foodimages/photo.jpg",
    gradient: "from-blue-500 to-indigo-600",
    delay: "150ms"
  }
];
---

<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" is:inline></script>

<MainGridLayout title={title} description={description}>
  
  <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative mb-8 animate-fade-in-up">
    <div class="card-base z-10 px-6 md:px-12 pt-8 pb-8 relative w-full flex flex-col md:flex-row items-center justify-between gap-8">
        <div class="relative z-20 md:w-1/2">
            <Icon name="material-symbols:science" class="absolute -left-6 -top-6 text-9xl -rotate-12 pointer-events-none text-purple-500 opacity-5 dark:opacity-[0.05]" />
            <div class="flex items-center gap-4 mb-5">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center text-white shadow-lg shadow-purple-500/30">
                    <Icon name="material-symbols:rocket-launch" class="text-2xl" />
                </div>
                <h1 class="text-3xl md:text-4xl font-black tracking-tight text-neutral-900 dark:text-zinc-100">西瓜实验室</h1>
            </div>
            <p class="text-base leading-relaxed text-neutral-600 dark:text-zinc-400 mb-6">
                欢迎来到我的数字神经中枢。这里有我的独立开发项目、子系统以及生活切片。
            </p>
            <div class="w-16 h-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500"></div>
        </div>

        <div class="relative z-20 md:w-1/2 flex items-center justify-center">
            <div class="relative w-full max-w-md mx-auto h-[250px] md:h-[300px] flex items-center">
                <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_w51pcehl.json" background="transparent" speed="1" style="width: 100%; height: 100%;" loop autoplay></lottie-player>
                <div class="absolute -bottom-2 -left-6 md:-bottom-4 md:-left-12 w-36 h-36 md:w-48 md:h-48 z-10 pointer-events-none drop-shadow-2xl">
                    <lottie-player src="https://assets9.lottiefiles.com/packages/lf20_zw0djhar.json" background="transparent" speed="1.2" style="width: 100%; height: 100%;" loop autoplay></lottie-player>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-16">
    {projects.map((project) => (
      <a 
        href={project.link} 
        target="_blank" 
        class="group flex flex-col card-base bg-[var(--card-bg)] rounded-[var(--radius-large)] overflow-hidden transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl relative border border-[var(--line-divider)]"
        style={`animation-delay: ${project.delay}; text-decoration: none;`}
      >
        <div class="relative h-48 w-full overflow-hidden bg-gray-100 dark:bg-zinc-900 border-b border-[var(--line-divider)]">
          <img 
            src={project.image} 
            alt={project.name} 
            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 will-change-transform dark:brightness-75 dark:group-hover:brightness-90"
            loading="lazy"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        </div>

        <div class="p-6 flex flex-col flex-1 relative">
          <div class="flex justify-between items-center mb-4">
            <div class="flex items-center gap-3">
              <div class={`w-11 h-11 rounded-xl flex items-center justify-center border border-black/5 dark:border-white/5 transition-all duration-300 group-hover:scale-110 ${project.iconBg} ${project.iconColor}`}>
                <Icon name={project.icon} class="text-[22px]" />
              </div>
              <h3 class="text-xl font-bold text-neutral-800 dark:text-zinc-100 group-hover:text-[var(--primary)] transition-colors m-0 leading-none">
                {project.name}
              </h3>
            </div>
            <Icon name="material-symbols:open-in-new" class="text-gray-300 dark:text-zinc-600 group-hover:text-[var(--primary)] transition-colors text-lg" />
          </div>
          
          <p class="text-[14px] text-neutral-500 dark:text-zinc-400 line-clamp-2 leading-relaxed mt-1">
            {project.desc}
          </p>
        </div>

        <div class={`absolute bottom-0 left-0 w-full h-1.5 bg-gradient-to-r ${project.gradient} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left`}></div>
      </a>
    ))}
  </div>

</MainGridLayout>

<style>
  .animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) both;
  }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>